//get a random CSS color (a string: # followed 3 hex digits)
//or optionally, given a hex color string find a random color whose WCAG color contrast score is at least AA
module.exports = function(color) {
	var check = require('check-types');
	if (!check.maybe.string(color)) {
		throw new TypeError('Argument should be string or undefined');
	}
	
	var random_hex = require('lib/util/random_hex');
	var colorString = require("color-string");	//check for valid color strings, colorString.get() returns null on invalid string
	if (check.undefined(color) || check.null(color)) {
		//just get a random hex color
		//as everything contrasts with no color or we just wanted a random color
		return "#" + random_hex(3);
	} else {
		if (!colorString.get(color)) {
			throw new TypeError('Argument should be valid CSS color (#000 - #fff)');
		}
		
		//get a random color that has good contrast with the argument color
		var contrast = require('wcag-contrast');
		while (true) {
			var random_color = random_hex(3);
			var contrast_score = contrast.score(contrast.hex(random_color, color));
			if (contrast_score === 'AA' || contrast_score === 'AAA') {
				return '#' + random_color;
			}
		}
	}
};