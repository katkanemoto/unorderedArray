var random_hex = require('lib/util/random_hex');
var test = require('tape');
var check = require('check-types');

test('[random_hex] correct, no arguments', function (t) {
	var result = random_hex();
	
	t.plan(1);
	t.ok(Number.parseInt(result, 16) >= 0 || Number.parseInt(result, 16) <= 16, "should be in default range [0, 16] (hex)");
});

test('[random_hex] correct, with arguments', function (t) {
	var result = random_hex(3);
	
	t.plan(1);
	t.ok(Number.parseInt(result, 16) >= 0 || Number.parseInt(result, 16) <= 4095, "should be in range [0, 4095] (hex)");
});

test('[random_hex] incorrect, argument too small', function (t) {
	t.plan(2);
	try {
		random_hex(0);
	} catch(error) {
		t.ok(check.instanceStrict(error, RangeError), 'we should get back a RangeError');
		var message = error.toString();
		t.ok(message.match(/greater than or equal to 1/), 'argument >= 1');
	}
});

test('[random_hex] incorrect, bad argument', function (t) {
	t.plan(2);
	try {
		random_hex("");
	} catch(error) {
		t.ok(check.instanceStrict(error, TypeError), 'we should get back a TypeError');
		var message = error.toString();
		t.ok(message.match(/number or undefined/), 'argument should be number or undefined');
	}
});